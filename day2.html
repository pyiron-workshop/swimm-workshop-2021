
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Day 2 - Up-scaling pyiron workflows &#8212; swimm-workshop-2021</title>
    
  <link rel="stylesheet" href="_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.37f24b989f4638ff9c27c22dc7559d4f.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.7d483ff0a819d6edff12ce0b1ead3928.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Day 3 - Beyond atomistics" href="day3.html" />
    <link rel="prev" title="Day 1 - Introduction to pyiron" href="day1.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  <img src="_static/logo_dark.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">swimm-workshop-2021</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="README.html">
   Simulation Workflows in Materials Modelling (SWiMM 2021)
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="day1.html">
   Day 1 - Introduction to pyiron
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Day 2 - Up-scaling pyiron workflows
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="day3.html">
   Day 3 - Beyond atomistics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="example.html">
   pyiron example notebook
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://pyiron.org">pyiron</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/day2.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->


            <!-- Full screen (wrap in <a> to have style consistency -->
            <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                    data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                    title="Fullscreen mode"><i
                        class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/pyiron/swimm-workshop-2021/master?urlpath=lab/tree/day2.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#energy-volume-curve">
   Energy volume curve
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#murnaghan-class">
   Murnaghan Class
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#phonopy-interface">
   Phonopy interface
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#harmonic-approximation">
   Harmonic approximation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#quasi-harmonic-approximation">
   Quasi-harmonic approximation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#scriptjob">
   Scriptjob
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#runtime-communication">
   Runtime communication
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   Summary
  </a>
 </li>
</ul>

        </nav>
        
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="day-2-up-scaling-pyiron-workflows">
<h1>Day 2 - Up-scaling pyiron workflows<a class="headerlink" href="#day-2-up-scaling-pyiron-workflows" title="Permalink to this headline">¶</a></h1>
<p>Following the introduction on the first day, the second day is focused on explaining how to up-scale existing simulation workflows. The tutorial is based on the molecular dynamics simulation code <a class="reference external" href="https://lammps.sandia.gov">LAMMPS</a>. Still the same protocols can also be executed with DFT codes like <a class="reference external" href="https://www.vasp.at">VASP</a> and <a class="reference external" href="https://sxrepo.mpie.de">S/PHI/nX</a>.</p>
<div class="section" id="energy-volume-curve">
<h2>Energy volume curve<a class="headerlink" href="#energy-volume-curve" title="Permalink to this headline">¶</a></h2>
<p>Following the tutorial from the first day, the energy volume curve is calculated using a <code class="docutils literal notranslate"><span class="pre">for-loop</span></code> over 11 different strains. Start by importing <code class="docutils literal notranslate"><span class="pre">numpy</span></code> as well as the pyiron <code class="docutils literal notranslate"><span class="pre">Project</span></code> class and create a new project named <code class="docutils literal notranslate"><span class="pre">scaleup</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">pyiron</span> <span class="kn">import</span> <span class="n">Project</span>
<span class="n">pr</span> <span class="o">=</span> <span class="n">Project</span><span class="p">(</span><span class="s2">&quot;scaleup&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>As a first step the lattice constant is optimized for the specific lattice constant of the selected interatomic potential using <a class="reference external" href="https://lammps.sandia.gov">LAMMPS</a>. By using auto-completion (tab-completion) only the <code class="docutils literal notranslate"><span class="pre">job_name</span></code> and the element in this case iron <code class="docutils literal notranslate"><span class="pre">Fe</span></code> have to be selected manually. A cubic cell is created by adding the option <code class="docutils literal notranslate"><span class="pre">cubic=True</span></code> when creating the bulk structure:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">job_mini</span> <span class="o">=</span> <span class="n">pr</span><span class="o">.</span><span class="n">create</span><span class="o">.</span><span class="n">job</span><span class="o">.</span><span class="n">Lammps</span><span class="p">(</span><span class="n">job_name</span><span class="o">=</span><span class="s2">&quot;job_mini&quot;</span><span class="p">)</span>
<span class="n">job_mini</span><span class="o">.</span><span class="n">structure</span> <span class="o">=</span> <span class="n">pr</span><span class="o">.</span><span class="n">create</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">ase</span><span class="o">.</span><span class="n">bulk</span><span class="p">(</span><span class="s2">&quot;Fe&quot;</span><span class="p">,</span> <span class="n">cubic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>From the list of available potentials in the <a class="reference external" href="https://www.ctcms.nist.gov/potentials/">NIST</a> and <a class="reference external" href="https://openkim.org">openKIM</a> potential databases, one potential is selected. Depending on the project it is commonly required to carefully test multiple interatomic potentials:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">potential</span> <span class="o">=</span> <span class="n">job_mini</span><span class="o">.</span><span class="n">list_potentials</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">potential</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;1997--Ackland-G-J--Fe--LAMMPS--ipr1&#39;
</pre></div>
</div>
</div>
</div>
<p>Optimise the lattice constant of the cubic simulation cell using the <code class="docutils literal notranslate"><span class="pre">calc_minimize()</span></code> function with the additional parameter <code class="docutils literal notranslate"><span class="pre">pressue=0.0</span></code>. The potential is assinged to the job object and afterwards the calculation is executed using <code class="docutils literal notranslate"><span class="pre">run()</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">job_mini</span><span class="o">.</span><span class="n">calc_minimize</span><span class="p">(</span><span class="n">pressure</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">job_mini</span><span class="o">.</span><span class="n">potential</span> <span class="o">=</span> <span class="n">potential</span>
<span class="n">job_mini</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The job job_mini was saved and received the ID: 2
</pre></div>
</div>
</div>
</div>
<p>The lattice constant is extracted from the final structure of the minimization calculation using the <code class="docutils literal notranslate"><span class="pre">get_structure()</span></code> function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alat_guess</span> <span class="o">=</span> <span class="n">job_mini</span><span class="o">.</span><span class="n">get_structure</span><span class="p">()</span><span class="o">.</span><span class="n">cell</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">alat_guess</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.866
</pre></div>
</div>
</div>
</div>
<p>Based on the initial guess of the lattice constant 11 strains ranging from <span class="math notranslate nohighlight">\(90\)</span>% to <span class="math notranslate nohighlight">\(110\)</span>% are applied to calculate the energy volume curve. The calculation are named based on the applied strain and the required structures are again created using the <code class="docutils literal notranslate"><span class="pre">pr.create.structure.ase.bulk()</span></code> function. All calculation are executed directly inline.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">strain</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>
    <span class="n">job_name</span> <span class="o">=</span> <span class="s2">&quot;lmp_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">strain</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
    <span class="n">job</span> <span class="o">=</span> <span class="n">pr</span><span class="o">.</span><span class="n">create</span><span class="o">.</span><span class="n">job</span><span class="o">.</span><span class="n">Lammps</span><span class="p">(</span><span class="n">job_name</span><span class="o">=</span><span class="n">job_name</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">alat_guess</span> <span class="o">*</span> <span class="n">strain</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">))</span>
    <span class="n">job</span><span class="o">.</span><span class="n">structure</span> <span class="o">=</span> <span class="n">pr</span><span class="o">.</span><span class="n">create</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">ase</span><span class="o">.</span><span class="n">bulk</span><span class="p">(</span><span class="s2">&quot;Fe&quot;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">alat_guess</span> <span class="o">*</span> <span class="n">strain</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">),</span> <span class="p">)</span>
    <span class="n">job</span><span class="o">.</span><span class="n">potential</span> <span class="o">=</span> <span class="n">potential</span>
    <span class="n">job</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.7675753208676444
The job lmp_0_9 was saved and received the ID: 3
2.7879258702511898
The job lmp_0_92 was saved and received the ID: 4
2.8079835805272397
The job lmp_0_94 was saved and received the ID: 5
2.8277587643206537
The job lmp_0_96 was saved and received the ID: 6
2.8472611651817745
The job lmp_0_98 was saved and received the ID: 7
2.866499999891875
The job lmp_1_0 was saved and received the ID: 8
2.885483996845223
The job lmp_1_02 was saved and received the ID: 9
2.90422143094099
The job lmp_1_04 was saved and received the ID: 10
2.9227201553630375
The job lmp_1_06 was saved and received the ID: 11
2.9409876305783165
The job lmp_1_08 was saved and received the ID: 12
2.9590309508440615
The job lmp_1_1 was saved and received the ID: 13
</pre></div>
</div>
</div>
</div>
<p>Overview of the existing calculation in the current project using <code class="docutils literal notranslate"><span class="pre">job_table()</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pr</span><span class="o">.</span><span class="n">job_table</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>status</th>
      <th>chemicalformula</th>
      <th>job</th>
      <th>subjob</th>
      <th>projectpath</th>
      <th>project</th>
      <th>timestart</th>
      <th>timestop</th>
      <th>totalcputime</th>
      <th>computer</th>
      <th>hamilton</th>
      <th>hamversion</th>
      <th>parentid</th>
      <th>masterid</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2</td>
      <td>finished</td>
      <td>Fe2</td>
      <td>job_mini</td>
      <td>/job_mini</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:51:52.778780</td>
      <td>2021-03-22 23:51:53.409059</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3</td>
      <td>finished</td>
      <td>Fe</td>
      <td>lmp_0_9</td>
      <td>/lmp_0_9</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:51:54.545651</td>
      <td>2021-03-22 23:51:55.084443</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>2</th>
      <td>4</td>
      <td>finished</td>
      <td>Fe</td>
      <td>lmp_0_92</td>
      <td>/lmp_0_92</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:51:55.922362</td>
      <td>2021-03-22 23:51:56.454064</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>3</th>
      <td>5</td>
      <td>finished</td>
      <td>Fe</td>
      <td>lmp_0_94</td>
      <td>/lmp_0_94</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:51:57.354493</td>
      <td>2021-03-22 23:51:57.921399</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>4</th>
      <td>6</td>
      <td>finished</td>
      <td>Fe</td>
      <td>lmp_0_96</td>
      <td>/lmp_0_96</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:51:58.821766</td>
      <td>2021-03-22 23:51:59.324438</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>5</th>
      <td>7</td>
      <td>finished</td>
      <td>Fe</td>
      <td>lmp_0_98</td>
      <td>/lmp_0_98</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:52:00.450136</td>
      <td>2021-03-22 23:52:01.021797</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>6</th>
      <td>8</td>
      <td>finished</td>
      <td>Fe</td>
      <td>lmp_1_0</td>
      <td>/lmp_1_0</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:52:02.045621</td>
      <td>2021-03-22 23:52:02.621343</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>7</th>
      <td>9</td>
      <td>finished</td>
      <td>Fe</td>
      <td>lmp_1_02</td>
      <td>/lmp_1_02</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:52:03.866085</td>
      <td>2021-03-22 23:52:04.411873</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>8</th>
      <td>10</td>
      <td>finished</td>
      <td>Fe</td>
      <td>lmp_1_04</td>
      <td>/lmp_1_04</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:52:05.616177</td>
      <td>2021-03-22 23:52:06.127510</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>9</th>
      <td>11</td>
      <td>finished</td>
      <td>Fe</td>
      <td>lmp_1_06</td>
      <td>/lmp_1_06</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:52:07.527880</td>
      <td>2021-03-22 23:52:08.085600</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>10</th>
      <td>12</td>
      <td>finished</td>
      <td>Fe</td>
      <td>lmp_1_08</td>
      <td>/lmp_1_08</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:52:09.550049</td>
      <td>2021-03-22 23:52:10.132919</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>11</th>
      <td>13</td>
      <td>finished</td>
      <td>Fe</td>
      <td>lmp_1_1</td>
      <td>/lmp_1_1</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:52:11.452091</td>
      <td>2021-03-22 23:52:12.000244</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>None</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The simulation results are collected with a simple for loop by iterating over the jobs in the project using <code class="docutils literal notranslate"><span class="pre">iterjobs()</span></code> and appending the final volume of the calculation and the total energy to a set of lists:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vol_lst</span><span class="p">,</span> <span class="n">eng_lst</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">job</span> <span class="ow">in</span> <span class="n">pr</span><span class="o">.</span><span class="n">iter_jobs</span><span class="p">():</span> 
    <span class="k">if</span> <span class="s2">&quot;lmp_&quot;</span> <span class="ow">in</span> <span class="n">job</span><span class="o">.</span><span class="n">job_name</span><span class="p">:</span>
        <span class="n">vol_lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;output/generic/volume&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">eng_lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;output/generic/energy_tot&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>Finally the simulation results of the results are visualised using <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> to plot the energy volume curve:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">vol_lst</span><span class="p">,</span> <span class="n">eng_lst</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Volume&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Energy&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Energy&#39;)
</pre></div>
</div>
<img alt="_images/day2_18_1.png" src="_images/day2_18_1.png" />
</div>
</div>
</div>
<div class="section" id="murnaghan-class">
<h2>Murnaghan Class<a class="headerlink" href="#murnaghan-class" title="Permalink to this headline">¶</a></h2>
<p>Using <code class="docutils literal notranslate"><span class="pre">for-loops</span></code> to create large datasets is limited. A more scalable approach is using already existing classes and combine those like building blocks. For the example of calculating an energy volume curve the <code class="docutils literal notranslate"><span class="pre">Murnaghan</span></code> class implements the creation of different strained structures as well as the management of the related calculation. In particular these job classes or <code class="docutils literal notranslate"><span class="pre">GenericMasters</span></code> support various modes of communication with the HPC queuing system. For example submitting individual calculation or executing all calculation in a single job either in serial or in parallel. Still for this presentation all jobs are executed inline.</p>
<p>As a start a template job is created which uses the same interatomic potential as the previous calculation and the same already optimised crystal structure:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">job_fe</span> <span class="o">=</span> <span class="n">pr</span><span class="o">.</span><span class="n">create</span><span class="o">.</span><span class="n">job</span><span class="o">.</span><span class="n">Lammps</span><span class="p">(</span><span class="n">job_name</span><span class="o">=</span><span class="s2">&quot;job_fe&quot;</span><span class="p">)</span>
<span class="n">job_fe</span><span class="o">.</span><span class="n">structure</span> <span class="o">=</span> <span class="n">job_mini</span><span class="o">.</span><span class="n">get_structure</span><span class="p">()</span>
<span class="n">job_fe</span><span class="o">.</span><span class="n">potential</span> <span class="o">=</span> <span class="n">potential</span>
</pre></div>
</div>
</div>
</div>
<p>The same template job is used for multiple calculation in the following, therefore it is copied for the different applications using the <code class="docutils literal notranslate"><span class="pre">copy_template()</span></code> function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">job_murn</span> <span class="o">=</span> <span class="n">job_fe</span><span class="o">.</span><span class="n">copy_template</span><span class="p">(</span>
    <span class="n">new_job_name</span><span class="o">=</span><span class="s2">&quot;job_murn&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>From the newly created copy a new job is created of type <code class="docutils literal notranslate"><span class="pre">Murnaghan</span></code>. By creating the job from the previous job template the relation of the job and it is location on the filesystem is defined. The input of the <code class="docutils literal notranslate"><span class="pre">Murnaghan</span></code> class can again be edited using the edge notation:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">murn</span> <span class="o">=</span> <span class="n">job_murn</span><span class="o">.</span><span class="n">create_job</span><span class="p">(</span>
    <span class="n">job_type</span><span class="o">=</span><span class="n">pr</span><span class="o">.</span><span class="n">job_type</span><span class="o">.</span><span class="n">Murnaghan</span><span class="p">,</span> 
    <span class="n">job_name</span><span class="o">=</span><span class="s2">&quot;murn&quot;</span>
<span class="p">)</span>
<span class="n">murn</span><span class="o">.</span><span class="n">input</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Parameter</th>
      <th>Value</th>
      <th>Comment</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>num_points</td>
      <td>11</td>
      <td>number of sample points</td>
    </tr>
    <tr>
      <th>1</th>
      <td>fit_type</td>
      <td>polynomial</td>
      <td>['polynomial', 'birch', 'birchmurnaghan', 'murnaghan', 'pouriertarantola', 'vinet']</td>
    </tr>
    <tr>
      <th>2</th>
      <td>fit_order</td>
      <td>3</td>
      <td>order of the fit polynom</td>
    </tr>
    <tr>
      <th>3</th>
      <td>vol_range</td>
      <td>0.1</td>
      <td>relative volume variation around volume defined by ref_ham</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>When the run method of the <code class="docutils literal notranslate"><span class="pre">Murnaghan</span></code> class is called, the individual calculation are started and after the successful completion the aggregated information is stored in the <code class="docutils literal notranslate"><span class="pre">Murnaghan</span></code> object:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">murn</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The job murn was saved and received the ID: 14
The job strain_0_9 was saved and received the ID: 15
The job strain_0_92 was saved and received the ID: 16
The job strain_0_94 was saved and received the ID: 17
The job strain_0_96 was saved and received the ID: 18
The job strain_0_98 was saved and received the ID: 19
The job strain_1_0 was saved and received the ID: 20
The job strain_1_02 was saved and received the ID: 21
The job strain_1_04 was saved and received the ID: 22
The job strain_1_06 was saved and received the ID: 23
The job strain_1_08 was saved and received the ID: 24
The job strain_1_1 was saved and received the ID: 25
job_id:  15 finished
job_id:  16 finished
job_id:  17 finished
job_id:  18 finished
job_id:  19 finished
job_id:  20 finished
job_id:  21 finished
job_id:  22 finished
job_id:  23 finished
job_id:  24 finished
job_id:  25 finished
</pre></div>
</div>
</div>
</div>
<p>In addition to the data aggregation methods the <code class="docutils literal notranslate"><span class="pre">Murnaghan</span></code> class also provides plotting methods for commonly used plots:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">murn</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/day2_29_0.png" src="_images/day2_29_0.png" />
</div>
</div>
</div>
<div class="section" id="phonopy-interface">
<h2>Phonopy interface<a class="headerlink" href="#phonopy-interface" title="Permalink to this headline">¶</a></h2>
<p>Following the same principles also the <code class="docutils literal notranslate"><span class="pre">Phonopy</span></code> interface is implemented in pyiron. This enables using <code class="docutils literal notranslate"><span class="pre">Phonopy</span></code> in combination with all simulation codes implemented in pyiron. The required steps are more or less identical. Again starting by copying the job template using the <code class="docutils literal notranslate"><span class="pre">copy_template()</span></code> function. Starting with a bulk calculation as a reference:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">job_bulk</span> <span class="o">=</span> <span class="n">job_fe</span><span class="o">.</span><span class="n">copy_template</span><span class="p">(</span>
    <span class="n">new_job_name</span><span class="o">=</span><span class="s2">&quot;job_bulk&quot;</span>
<span class="p">)</span>
<span class="n">job_bulk</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The job job_bulk was saved and received the ID: 26
</pre></div>
</div>
</div>
</div>
<p>Following the bluk calculation the <code class="docutils literal notranslate"><span class="pre">Phonopy</span></code> job is created by again copying the job template and creating a <code class="docutils literal notranslate"><span class="pre">Phonopy</span></code> job from the job object:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">job_phono</span> <span class="o">=</span> <span class="n">job_fe</span><span class="o">.</span><span class="n">copy_template</span><span class="p">(</span>
    <span class="n">new_job_name</span><span class="o">=</span><span class="s2">&quot;job_phono&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Again the input object of the <code class="docutils literal notranslate"><span class="pre">Phonopy</span></code> job provides access to the most commonly used input parameters:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">phono</span> <span class="o">=</span> <span class="n">job_phono</span><span class="o">.</span><span class="n">create_job</span><span class="p">(</span>
    <span class="n">job_type</span><span class="o">=</span><span class="n">pr</span><span class="o">.</span><span class="n">job_type</span><span class="o">.</span><span class="n">PhonopyJob</span><span class="p">,</span> 
    <span class="n">job_name</span><span class="o">=</span><span class="s2">&quot;phono&quot;</span>
<span class="p">)</span>
<span class="n">phono</span><span class="o">.</span><span class="n">input</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Parameter</th>
      <th>Value</th>
      <th>Comment</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>interaction_range</td>
      <td>10.000000</td>
      <td>Minimal size of supercell, Ang</td>
    </tr>
    <tr>
      <th>1</th>
      <td>factor</td>
      <td>15.633302</td>
      <td>Frequency unit conversion factor (default for VASP)</td>
    </tr>
    <tr>
      <th>2</th>
      <td>displacement</td>
      <td>0.010000</td>
      <td>atoms displacement, Ang</td>
    </tr>
    <tr>
      <th>3</th>
      <td>dos_mesh</td>
      <td>20.000000</td>
      <td>mesh size for DOS calculation</td>
    </tr>
    <tr>
      <th>4</th>
      <td>primitive_matrix</td>
      <td>NaN</td>
      <td></td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Once more the job is executed using the <code class="docutils literal notranslate"><span class="pre">run()</span></code> function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">phono</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The job phono was saved and received the ID: 27
The job job_phono_0 was saved and received the ID: 28
</pre></div>
</div>
</div>
</div>
<p>And the density of states can be plotted directly from the <code class="docutils literal notranslate"><span class="pre">Phonopy</span></code> job object:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">phono</span><span class="o">.</span><span class="n">plot_dos</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:title={&#39;center&#39;:&#39;Phonon DOS vs Energy&#39;}, xlabel=&#39;Frequency [THz]&#39;, ylabel=&#39;DOS&#39;&gt;
</pre></div>
</div>
<img alt="_images/day2_39_1.png" src="_images/day2_39_1.png" />
</div>
</div>
</div>
<div class="section" id="harmonic-approximation">
<h2>Harmonic approximation<a class="headerlink" href="#harmonic-approximation" title="Permalink to this headline">¶</a></h2>
<p>In addition to the calculation of the density of states <code class="docutils literal notranslate"><span class="pre">Phonopy</span></code> also enables the calculation of the free energy with the harmonic and quasi-harmonic approximation. Starting with the harmonic approximation, the free energy is calculated for temperatures ranging from <span class="math notranslate nohighlight">\(0\)</span>K to <span class="math notranslate nohighlight">\(800\)</span>K:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">temperatures</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">800</span><span class="p">,</span> <span class="mi">41</span><span class="p">)</span>
<span class="n">bulk_thermal_properties</span> <span class="o">=</span> <span class="n">phono</span><span class="o">.</span><span class="n">get_thermal_properties</span><span class="p">(</span><span class="n">temperatures</span><span class="o">=</span><span class="n">temperatures</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The free energy over temperature is plotted by combining the vibrational and the bulk energy:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">temperatures</span><span class="p">,</span> <span class="n">job_bulk</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">energy_pot</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">bulk_thermal_properties</span><span class="o">.</span><span class="n">free_energies</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Temperature [K]&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Free energy  ($U+F_</span><span class="si">{vib}</span><span class="s2">$)  [eV]&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/day2_43_0.png" src="_images/day2_43_0.png" />
</div>
</div>
</div>
<div class="section" id="quasi-harmonic-approximation">
<h2>Quasi-harmonic approximation<a class="headerlink" href="#quasi-harmonic-approximation" title="Permalink to this headline">¶</a></h2>
<p>The major advantage of the <code class="docutils literal notranslate"><span class="pre">GenericMaster</span></code> classes is that they can not only be used to combine regular calculation, but also <code class="docutils literal notranslate"><span class="pre">GenericMaster</span></code> classes themselves. Like building blocks the different pyiron classes can be combined and nested. For the quasi-harmonic approximation the volume dependent free energy is calculated and the optimal volume for a given temperature is identifed by fitting. Starting once more by copying the template job using the <code class="docutils literal notranslate"><span class="pre">copy_template()</span></code> function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">job_strain</span> <span class="o">=</span> <span class="n">job_fe</span><span class="o">.</span><span class="n">copy_template</span><span class="p">(</span>
    <span class="n">new_job_name</span><span class="o">=</span><span class="s2">&quot;job_strain&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Aftewards the same template job is used to create both a <code class="docutils literal notranslate"><span class="pre">Murnaghan</span></code> job and a <code class="docutils literal notranslate"><span class="pre">Phonopy</span></code> job:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">murn_strain</span> <span class="o">=</span> <span class="n">job_strain</span><span class="o">.</span><span class="n">create_job</span><span class="p">(</span>
    <span class="n">job_type</span><span class="o">=</span><span class="n">pr</span><span class="o">.</span><span class="n">job_type</span><span class="o">.</span><span class="n">Murnaghan</span><span class="p">,</span>
    <span class="n">job_name</span><span class="o">=</span><span class="s2">&quot;murn_strain&quot;</span>
<span class="p">)</span>
<span class="n">phono_strain</span> <span class="o">=</span> <span class="n">job_strain</span><span class="o">.</span><span class="n">create_job</span><span class="p">(</span>
    <span class="n">job_type</span><span class="o">=</span><span class="n">pr</span><span class="o">.</span><span class="n">job_type</span><span class="o">.</span><span class="n">PhonopyJob</span><span class="p">,</span>
    <span class="n">job_name</span><span class="o">=</span><span class="s2">&quot;phono_strain&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Phonopy</span></code> job is then used to create a <code class="docutils literal notranslate"><span class="pre">QuasiHarmonicJob</span></code> which calculates the free energy for each of the different volumes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quasi_strain</span> <span class="o">=</span> <span class="n">phono_strain</span><span class="o">.</span><span class="n">create_job</span><span class="p">(</span>
    <span class="n">job_type</span><span class="o">=</span><span class="n">pr</span><span class="o">.</span><span class="n">job_type</span><span class="o">.</span><span class="n">QuasiHarmonicJob</span><span class="p">,</span>
    <span class="n">job_name</span><span class="o">=</span><span class="s2">&quot;quasi_strain&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The input of the <code class="docutils literal notranslate"><span class="pre">QuasiHarmonicJob</span></code> is adjusted to range the temperature up to <span class="math notranslate nohighlight">\(800\)</span>K using <span class="math notranslate nohighlight">\(41\)</span> steps:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quasi_strain</span><span class="o">.</span><span class="n">input</span><span class="p">[</span><span class="s2">&quot;temperature_end&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">800</span>
<span class="n">quasi_strain</span><span class="o">.</span><span class="n">input</span><span class="p">[</span><span class="s2">&quot;temperature_steps&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">41</span>
</pre></div>
</div>
</div>
</div>
<p>After all calculation are setup they can be executed by again calling the <code class="docutils literal notranslate"><span class="pre">run()</span></code> commands on both the <code class="docutils literal notranslate"><span class="pre">Murnaghan</span></code> job and the <code class="docutils literal notranslate"><span class="pre">QuasiHarmonicJob</span></code> job:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">murn_strain</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">quasi_strain</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The job murn_strain was saved and received the ID: 29
The job strain_0_9 was saved and received the ID: 30
The job strain_0_92 was saved and received the ID: 31
The job strain_0_94 was saved and received the ID: 32
The job strain_0_96 was saved and received the ID: 33
The job strain_0_98 was saved and received the ID: 34
The job strain_1_0 was saved and received the ID: 35
The job strain_1_02 was saved and received the ID: 36
The job strain_1_04 was saved and received the ID: 37
The job strain_1_06 was saved and received the ID: 38
The job strain_1_08 was saved and received the ID: 39
The job strain_1_1 was saved and received the ID: 40
job_id:  30 finished
job_id:  31 finished
job_id:  32 finished
job_id:  33 finished
job_id:  34 finished
job_id:  35 finished
job_id:  36 finished
job_id:  37 finished
job_id:  38 finished
job_id:  39 finished
job_id:  40 finished
The job quasi_strain was saved and received the ID: 41
The job strain_0_9 was saved and received the ID: 42
The job job_strain_0 was saved and received the ID: 43
The job strain_0_92 was saved and received the ID: 44
The job job_strain_0 was saved and received the ID: 45
The job strain_0_94 was saved and received the ID: 46
The job job_strain_0 was saved and received the ID: 47
The job strain_0_96 was saved and received the ID: 48
The job job_strain_0 was saved and received the ID: 49
The job strain_0_98 was saved and received the ID: 50
The job job_strain_0 was saved and received the ID: 51
The job strain_1_0 was saved and received the ID: 52
The job job_strain_0 was saved and received the ID: 53
The job strain_1_02 was saved and received the ID: 54
The job job_strain_0 was saved and received the ID: 55
The job strain_1_04 was saved and received the ID: 56
The job job_strain_0 was saved and received the ID: 57
The job strain_1_06 was saved and received the ID: 58
The job job_strain_0 was saved and received the ID: 59
The job strain_1_08 was saved and received the ID: 60
The job job_strain_0 was saved and received the ID: 61
The job strain_1_1 was saved and received the ID: 62
The job job_strain_0 was saved and received the ID: 63
</pre></div>
</div>
</div>
</div>
<p>After the successful completion of all calculation the results can be visualised using <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> starting by creating a color map:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The free energy is plotted over volume and temperature, starting at a low temperature of <span class="math notranslate nohighlight">\(0\)</span>K up to the <span class="math notranslate nohighlight">\(800\)</span>K:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Iterate over the the output of the QuasiHarmonicJob to plot the temperature dependent free energy over volume </span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">[</span><span class="n">t</span><span class="p">,</span> <span class="n">free_energy</span><span class="p">,</span> <span class="n">v</span><span class="p">]</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
        <span class="nb">zip</span><span class="p">(</span><span class="n">quasi_strain</span><span class="p">[</span><span class="s2">&quot;output/temperatures&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> 
            <span class="n">quasi_strain</span><span class="p">[</span><span class="s2">&quot;output/free_energy&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> 
            <span class="n">quasi_strain</span><span class="p">[</span><span class="s2">&quot;output/volumes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)):</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">cmap</span><span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">quasi_strain</span><span class="p">[</span><span class="s2">&quot;output/temperatures&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>
    <span class="c1"># Add the energy of the Murnaghan Job to the vibrational free energy</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">free_energy</span> <span class="o">+</span> <span class="n">murn_strain</span><span class="p">[</span><span class="s2">&quot;output/energy&quot;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>

<span class="c1"># Add labels to the plot     </span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Volume&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Free Energy&quot;</span><span class="p">)</span>

<span class="c1"># Add a color bar to visualise the temperature dependence </span>
<span class="n">temperatures</span> <span class="o">=</span> <span class="n">quasi_strain</span><span class="p">[</span><span class="s2">&quot;output/temperatures&quot;</span><span class="p">]</span>
<span class="n">normalize</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="n">temperatures</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">vmax</span><span class="o">=</span><span class="n">temperatures</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
<span class="n">scalarmappaple</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">ScalarMappable</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="n">normalize</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
<span class="n">scalarmappaple</span><span class="o">.</span><span class="n">set_array</span><span class="p">(</span><span class="n">temperatures</span><span class="p">)</span>
<span class="n">cbar</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">scalarmappaple</span><span class="p">)</span>
<span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s2">&quot;Temperature&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/day2_57_0.png" src="_images/day2_57_0.png" />
</div>
</div>
<p>In addition to the free energy over temperature and volume, the optimised volume over temperature allows to quantify the volume expansion:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use the optimise_volume() function of the QuasiHarmonicJob  </span>
<span class="n">v0_lst</span><span class="p">,</span> <span class="n">free_eng_lst</span><span class="p">,</span> <span class="n">entropy_lst</span><span class="p">,</span> <span class="n">cv_lst</span> <span class="o">=</span> <span class="n">quasi_strain</span><span class="o">.</span><span class="n">optimise_volume</span><span class="p">(</span>
    <span class="c1"># It requires the output energy of the energy volume curve as additional input </span>
    <span class="n">bulk_eng</span><span class="o">=</span><span class="n">murn_strain</span><span class="p">[</span><span class="s2">&quot;output/energy&quot;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">temperature_output_lst</span> <span class="o">=</span> <span class="n">quasi_strain</span><span class="p">[</span><span class="s2">&quot;output/temperatures&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">temperature_output_lst</span><span class="p">,</span> <span class="n">v0_lst</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Temperature&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Volume&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Volume&#39;)
</pre></div>
</div>
<img alt="_images/day2_60_1.png" src="_images/day2_60_1.png" />
</div>
</div>
<p>Finally based on the volume expansion over temperature the quasi-harmonic free energy is calculated:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">temperature_output_lst</span><span class="p">,</span> <span class="n">free_eng_lst</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Temperature&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Free Energy&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Free Energy&#39;)
</pre></div>
</div>
<img alt="_images/day2_62_1.png" src="_images/day2_62_1.png" />
</div>
</div>
<p>This example demonstrates how pyiron can be used to calculate free energies.</p>
</div>
<div class="section" id="scriptjob">
<h2>Scriptjob<a class="headerlink" href="#scriptjob" title="Permalink to this headline">¶</a></h2>
<p>From a more technical perspective the <code class="docutils literal notranslate"><span class="pre">GenericMaster</span></code> classes are only one kind of tool integrated in pyiron to up-scale existing simulation protocols. While they provide a lot of flexibility like nesting multiple levels of <code class="docutils literal notranslate"><span class="pre">GenericMaster</span></code> objects, the development of <code class="docutils literal notranslate"><span class="pre">GenericMaster</span></code> classes requires a general understanding of pyiron. A more flexible way to up-scale an existing workflow is using <code class="docutils literal notranslate"><span class="pre">Scriptjob</span></code> objects which can execute existing python scripts and also existing jupyter notebooks. So once a new simulation workflow is implemented in a jupyter notebook this jupyter notebook can be used as an input for a <code class="docutils literal notranslate"><span class="pre">Scriptjob</span></code> to loop over a control parameter like looping over existing interatomic potentials. In this example we create a simple <code class="docutils literal notranslate"><span class="pre">Scriptjob</span></code> which just contains a python script:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">python_script</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s2">from pyiron import Project</span>
<span class="s2">pr = Project(&quot;script&quot;)</span>
<span class="s2">job = pr.create.job.Lammps(&quot;lmp&quot;)</span>
<span class="s2">job.structure = pr.create.structure.ase.bulk(&quot;Fe&quot;)</span>
<span class="s2">job.run()</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>The python script which creates a single LAMMPS calculation is written to a python file named <code class="docutils literal notranslate"><span class="pre">script.py</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;script.py&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="n">python_script</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Afterwards a <code class="docutils literal notranslate"><span class="pre">ScriptJob</span></code> object is created from the project object and the python file <code class="docutils literal notranslate"><span class="pre">script.py</span></code> is attached as <code class="docutils literal notranslate"><span class="pre">script_path</span></code> before the job is executed using the <code class="docutils literal notranslate"><span class="pre">run()</span></code> function. Again the <code class="docutils literal notranslate"><span class="pre">ScriptJob</span></code> object behaves like any other job object in pyiron:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">job_script</span> <span class="o">=</span> <span class="n">pr</span><span class="o">.</span><span class="n">create</span><span class="o">.</span><span class="n">job</span><span class="o">.</span><span class="n">ScriptJob</span><span class="p">(</span><span class="s2">&quot;script&quot;</span><span class="p">)</span>
<span class="n">job_script</span><span class="o">.</span><span class="n">script_path</span> <span class="o">=</span> <span class="s2">&quot;script.py&quot;</span>
<span class="n">job_script</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The job script was saved and received the ID: 64
</pre></div>
</div>
</div>
</div>
<p>By looking at the job table it is visible that not only the <code class="docutils literal notranslate"><span class="pre">ScriptJob</span></code> itself but also the job executed from the python script named <code class="docutils literal notranslate"><span class="pre">lmp</span></code> is listed in the project:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pr</span><span class="o">.</span><span class="n">job_table</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>status</th>
      <th>chemicalformula</th>
      <th>job</th>
      <th>subjob</th>
      <th>projectpath</th>
      <th>project</th>
      <th>timestart</th>
      <th>timestop</th>
      <th>totalcputime</th>
      <th>computer</th>
      <th>hamilton</th>
      <th>hamversion</th>
      <th>parentid</th>
      <th>masterid</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2</td>
      <td>finished</td>
      <td>Fe2</td>
      <td>job_mini</td>
      <td>/job_mini</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:51:52.778780</td>
      <td>2021-03-22 23:51:53.409059</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3</td>
      <td>finished</td>
      <td>Fe</td>
      <td>lmp_0_9</td>
      <td>/lmp_0_9</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:51:54.545651</td>
      <td>2021-03-22 23:51:55.084443</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>4</td>
      <td>finished</td>
      <td>Fe</td>
      <td>lmp_0_92</td>
      <td>/lmp_0_92</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:51:55.922362</td>
      <td>2021-03-22 23:51:56.454064</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>5</td>
      <td>finished</td>
      <td>Fe</td>
      <td>lmp_0_94</td>
      <td>/lmp_0_94</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:51:57.354493</td>
      <td>2021-03-22 23:51:57.921399</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>6</td>
      <td>finished</td>
      <td>Fe</td>
      <td>lmp_0_96</td>
      <td>/lmp_0_96</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:51:58.821766</td>
      <td>2021-03-22 23:51:59.324438</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>59</th>
      <td>61</td>
      <td>finished</td>
      <td>Fe128</td>
      <td>job_strain_0</td>
      <td>/job_strain_0</td>
      <td>/home/jovyan/</td>
      <td>scaleup/quasi_strain_hdf5/strain_1_08_hdf5/</td>
      <td>2021-03-22 23:54:24.027821</td>
      <td>2021-03-22 23:54:24.729845</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>60.0</td>
    </tr>
    <tr>
      <th>60</th>
      <td>62</td>
      <td>finished</td>
      <td>Fe2</td>
      <td>strain_1_1</td>
      <td>/strain_1_1</td>
      <td>/home/jovyan/</td>
      <td>scaleup/quasi_strain_hdf5/</td>
      <td>2021-03-22 23:54:28.338953</td>
      <td>2021-03-22 23:54:34.997655</td>
      <td>6.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1#1/1</td>
      <td>PhonopyJob</td>
      <td>0.0.1</td>
      <td>None</td>
      <td>41.0</td>
    </tr>
    <tr>
      <th>61</th>
      <td>63</td>
      <td>finished</td>
      <td>Fe128</td>
      <td>job_strain_0</td>
      <td>/job_strain_0</td>
      <td>/home/jovyan/</td>
      <td>scaleup/quasi_strain_hdf5/strain_1_1_hdf5/</td>
      <td>2021-03-22 23:54:31.821842</td>
      <td>2021-03-22 23:54:32.536800</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>62.0</td>
    </tr>
    <tr>
      <th>62</th>
      <td>64</td>
      <td>finished</td>
      <td>None</td>
      <td>script</td>
      <td>/script</td>
      <td>/home/jovyan/</td>
      <td>scaleup/</td>
      <td>2021-03-22 23:54:50.762741</td>
      <td>2021-03-22 23:54:55.087347</td>
      <td>4.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Script</td>
      <td>0.1</td>
      <td>None</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>63</th>
      <td>65</td>
      <td>finished</td>
      <td>Fe</td>
      <td>lmp</td>
      <td>/lmp</td>
      <td>/home/jovyan/</td>
      <td>scaleup/script_hdf5/script/script/</td>
      <td>2021-03-22 23:54:53.820840</td>
      <td>2021-03-22 23:54:54.309320</td>
      <td>0.0</td>
      <td>pyiron@jupyter-pyiron-2dswimm-2dworkshop-2d2021-2dw6x4leku#1</td>
      <td>Lammps</td>
      <td>0.1</td>
      <td>None</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>64 rows × 15 columns</p>
</div></div></div>
</div>
<p>Therefore while offering less flexibility the <code class="docutils literal notranslate"><span class="pre">ScriptJob</span></code> class is a simple way to create reusable snippets if certain parts of a simulation protocol are commonly repeated in different projects.</p>
</div>
<div class="section" id="runtime-communication">
<h2>Runtime communication<a class="headerlink" href="#runtime-communication" title="Permalink to this headline">¶</a></h2>
<p>The third way to accelerate existing simulation protocols in pyiron is by using the so-called interactive mode. This interactive mode is enabled by simply setting the flag <code class="docutils literal notranslate"><span class="pre">job.server.run_mode.interactive</span> <span class="pre">=</span> <span class="pre">True</span></code> and it enables communication with serial and parallel simulation codes during run time by leveraging various communication interfaces. For example:</p>
<ul class="simple">
<li><p>LAMMPS is available as Python library so in process communication is easy.</p></li>
<li><p>VASP provides interactive communication via standard input and output in combination with the <code class="docutils literal notranslate"><span class="pre">INTERACTIVE</span></code> tag set in the <code class="docutils literal notranslate"><span class="pre">INCAR</span></code> file which is unfortunatley not officially documented.</p></li>
<li><p>S/PHI/nX uses unix pipes to communicate with python during run time.</p></li>
</ul>
<p>pyiron implements a generic interface for these different communication standards, compareable to <a class="reference external" href="http://ipi-code.org">ipi-code</a> and again enables the user to interact with the codes interactively by keeping the simulation code running in the background. In combination with the <code class="docutils literal notranslate"><span class="pre">Murnaghan</span></code> job a single <code class="docutils literal notranslate"><span class="pre">LAMMPS</span></code> calculation can be used as quantum engine to evaluate 11 different strains.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">job_murn</span> <span class="o">=</span> <span class="n">job_fe</span><span class="o">.</span><span class="n">copy_template</span><span class="p">(</span>
    <span class="n">new_job_name</span><span class="o">=</span><span class="s2">&quot;job_murn_int&quot;</span>
<span class="p">)</span>
<span class="n">job_murn</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">run_mode</span><span class="o">.</span><span class="n">interactive</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">murn</span> <span class="o">=</span> <span class="n">job_murn</span><span class="o">.</span><span class="n">create_job</span><span class="p">(</span>
    <span class="n">job_type</span><span class="o">=</span><span class="n">pr</span><span class="o">.</span><span class="n">job_type</span><span class="o">.</span><span class="n">Murnaghan</span><span class="p">,</span> 
    <span class="n">job_name</span><span class="o">=</span><span class="s2">&quot;murn_int&quot;</span>
<span class="p">)</span>
<span class="n">murn</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="n">murn</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The job murn_int was saved and received the ID: 66
The job murn_int_job_murn_int was saved and received the ID: 67
</pre></div>
</div>
<img alt="_images/day2_74_1.png" src="_images/day2_74_1.png" />
</div>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>After the general introduction to pyiron on the first day the second session introduced multiple methods to up-scale existing simulation protocols:</p>
<ul class="simple">
<li><p>Starting with <code class="docutils literal notranslate"><span class="pre">GenericMaster</span></code> classes which can be combined like building blocks.</p></li>
<li><p>Followed by the <code class="docutils literal notranslate"><span class="pre">ScriptJob</span></code> class which enables the easy reuse of existing simulation protocols.</p></li>
<li><p>Finally the interactive mode was briefly introduced as a way to accelerate calculation by keeping the simulation code running during the execution.</p></li>
</ul>
<p>Additional exercises:</p>
<ul class="simple">
<li><p>Extend the evaluation of interatomic potentials from the first day by comparing the density of states for different interatomic potentials. How does the sensitivity of bulk properties like the bulk modulus compare to the sensitivity of the free energy of different interatomic potentials?</p></li>
<li><p>Write a <code class="docutils literal notranslate"><span class="pre">ScriptJob</span></code> for a Murnaghan calculation, by using the <code class="docutils literal notranslate"><span class="pre">script_job.input</span></code> to set the input for the <code class="docutils literal notranslate"><span class="pre">ScriptJob</span></code> and then inside the <code class="docutils literal notranslate"><span class="pre">ScriptJob</span></code> use <code class="docutils literal notranslate"><span class="pre">pr.get_external_input()</span></code> to retrieve the input.</p></li>
<li><p>Implement a simple MonteCarlo algorithm for LAMMPS by changing the atom species of the <code class="docutils literal notranslate"><span class="pre">job.structure</span></code> object and calling <code class="docutils literal notranslate"><span class="pre">job.run()</span></code> after each change to evaluate the structure in interactive mode. By setting <code class="docutils literal notranslate"><span class="pre">job.interactive_enforce_structure_reset</span> <span class="pre">=</span> <span class="pre">True</span></code> the structure is always reset for each step, while the flag is typically set to false for applications like calculating molecular dynamics trajectories or thermodynamic integration.</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="day1.html" title="previous page">Day 1 - Introduction to pyiron</a>
    <a class='right-next' id="next-link" href="day3.html" title="next page">Day 3 - Beyond atomistics</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By pyiron<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>